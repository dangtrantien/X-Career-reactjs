"use strict";(self.webpackChunkx_career_reactjs=self.webpackChunkx_career_reactjs||[]).push([[37],{67461:function(e,t,a){a.d(t,{Z:function(){return r}});var n=a(82388),s=a(39910);class r extends s.T{constructor(){super({endpoint:"api/tasks"}),this.createNew=async e=>await(0,n.Z)({method:"POST",url:"".concat(this.api,"/").concat(this.endpoint,"/createTask"),data:{task:e}}),this.getAll=async()=>await(0,n.Z)({method:"GET",url:"".concat(this.api,"/").concat(this.endpoint,"/getAllTasksOfAllBoards"),data:null}),this.updateByID=async(e,t)=>await(0,n.Z)({method:"PUT",url:"".concat(this.api,"/").concat(this.endpoint,"/updateTaskByID?id=").concat(e),data:{task:t}})}}},97815:function(e,t,a){var n=a(72791),s=a(66934),r=a(12065),i=a(65117),o=a(24518),l=a(61889),d=a(68096),c=a(17133),h=a(79012),m=a(85523),x=a(94454),u=a(93044),p=a(58956),g=a(80184);const b=(0,s.ZP)((e=>(0,g.jsx)(i.Z,{elevation:0,anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},...e})))((e=>{let{theme:t}=e;return{"& .MuiPaper-root":{borderRadius:6,marginTop:t.spacing(1),minWidth:180,color:"light"===t.palette.mode?"rgb(55, 65, 81)":t.palette.grey[300],boxShadow:"rgb(255, 255, 255) 0px 0px 0px 0px, rgba(0, 0, 0, 0.05) 0px 0px 0px 1px, rgba(0, 0, 0, 0.1) 0px 10px 15px -3px, rgba(0, 0, 0, 0.05) 0px 4px 6px -2px","& .MuiMenu-list":{padding:"4px 0"},"& .MuiMenuItem-root":{"& .MuiSvgIcon-root":{fontSize:18,color:t.palette.text.secondary,marginRight:t.spacing(1.5)},"&:active":{backgroundColor:(0,r.Fq)(t.palette.primary.main,t.palette.action.selectedOpacity)}}}}}));t.Z=e=>{const{page:t,id:a,check:s,checkNone:r,handleFilterNone:i,handleFilter:j,member:Z,board:v,date:w}=e,[f,k]=(0,n.useState)(null),y=Boolean(f);return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(o.Z,{id:"demo-customized-button","aria-controls":y?"demo-customized-menu":void 0,"aria-haspopup":"true","aria-expanded":y?"true":void 0,variant:"contained",disableElevation:!0,onClick:e=>{k(e.currentTarget)},startIcon:(0,g.jsx)(p.wHY,{size:20}),children:"filter"}),(0,g.jsxs)(b,{id:"demo-customized-menu",MenuListProps:{"aria-labelledby":"demo-customized-button"},anchorEl:f,open:y,onClose:()=>{k(null)},children:["board"===t&&(0,g.jsx)(l.ZP,{sx:{display:"flex",flexDirection:"column"},children:(0,g.jsxs)(d.Z,{sx:{m:"16px 16px 0 16px"},component:"fieldset",variant:"standard",children:[(0,g.jsx)(c.Z,{component:"legend",children:"Filter by member"}),(0,g.jsxs)(h.Z,{children:[(0,g.jsx)(m.Z,{control:(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(x.Z,{checked:r,onChange:e=>{i(e)}}),(0,g.jsx)(u.Z,{src:"",sx:{width:20,height:20,mr:1}})]}),label:"No membres"}),Z&&Z.map((e=>(0,g.jsx)(m.Z,{control:(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(x.Z,{checked:a===e._id&&s,onChange:t=>{j(t,e._id)}}),(0,g.jsx)(u.Z,{src:e.avatar.data,sx:{width:20,height:20,mr:1}})]}),label:e.name},e._id)))]})]})}),"user"===t&&(0,g.jsx)(l.ZP,{sx:{display:"flex",flexDirection:"column"},children:(0,g.jsxs)(d.Z,{sx:{m:"16px 16px 0 16px"},component:"fieldset",variant:"standard",children:[(0,g.jsx)(c.Z,{component:"legend",children:"Filter by board"}),(0,g.jsx)(h.Z,{children:v&&v.map((e=>(0,g.jsx)(m.Z,{control:(0,g.jsx)(g.Fragment,{children:(0,g.jsx)(x.Z,{checked:a===e._id&&s,onChange:t=>{j(t,e._id)}})}),label:e.name},e._id)))})]})})]})]})}},51037:function(e,t,a){a.r(t),a.d(t,{default:function(){return Se}});var n=a(72791),s=a(16871),r=a(61889),i=a(20890),o=a(20068),l=a(13400),d=a(93044),c=a(65117),h=a(94721),m=a(23786),x=a(24518),u=a(58956),p=a(32065),g=a(89554),b=a(57621),j=a(39504),Z=a(51802),v=a(72010),w=a(39029),f=a.n(w),k=(a(25646),a(5289)),y=a(64554),C=a(39157),I=a(28029),S=a(25028),P=a(62062),D=a.n(P),_=a(67461),F=a(82388),T=a(39910);class A extends T.T{constructor(){super({endpoint:"api/uploads"}),this.uploadFile=async e=>await(0,F.Z)({method:"POST",url:"".concat(this.api,"/").concat(this.endpoint,"/uploadFile"),data:{upload:e}}),this.getFromTask=async()=>await(0,F.Z)({method:"GET",url:"".concat(this.api,"/").concat(this.endpoint,"/getAllFilesOfAllTasks"),data:null}),this.getFromComment=async()=>await(0,F.Z)({method:"GET",url:"".concat(this.api,"/").concat(this.endpoint,"/getAllFilesOfAllComments"),data:null})}}var z=a(73243),E=a(31400),B=a(32369),M=a(44428),R=a(26594),O=a(62915);const N=sessionStorage.getItem("token");class W extends T.T{constructor(){super({endpoint:"api/comments"}),this.createNew=async e=>await(0,F.Z)({headers:{Authorization:"Bearer ".concat(N)},method:"POST",url:"".concat(this.api,"/").concat(this.endpoint,"/addComment"),data:{comment:e}}),this.getByTaskID=async e=>await(0,F.Z)({method:"GET",url:"".concat(this.api,"/").concat(this.endpoint,"/getCommentByTaskID?id=").concat(e),data:null}),this.updateByID=async(e,t)=>await(0,F.Z)({method:"PUT",url:"".concat(this.api,"/").concat(this.endpoint,"/updateCommentByID?id=").concat(e),data:{comment:t}})}}var L=a(98955),Y=a(54233),G=a(80184);const H=new W,U=new Y.Z,V=new A,$=(0,M.ZP)(T.h,{withCredentials:!0});var q=e=>{const{taskId:t,onEdit:a,onClose:s,editMessage:i,fileMessage:o,commentId:c,inputWidth:h}=e,m=(0,n.createRef)(),p=sessionStorage.getItem("id"),[g,b]=(0,n.useState)(""),[j,Z]=(0,n.useState)({}),[v,w]=(0,n.useState)(!1),[f,k]=(0,n.useState)(!1);return(0,n.useEffect)((()=>{U.getByID(p).then((e=>{Z(e.data[0])})),i&&b(i),o&&(k(!0),b("[".concat(o.name,"]")))}),[p,i,o]),(0,G.jsxs)(r.ZP,{container:!0,alignItems:"flex-start",sx:{mt:1},children:[!i&&(0,G.jsx)(d.Z,{src:j.avatar&&j.avatar.data,sx:{width:40,height:40,mr:1}}),(0,G.jsxs)(r.ZP,{sx:{p:1,borderRadius:2,boxShadow:4,position:"relative",width:h},children:[(0,G.jsx)("textarea",{className:"comment",placeholder:"Write a comment...",value:g,onChange:e=>{e.target.style.height="auto",e.target.style.height=e.target.scrollHeight+"px",b(e.target.value)},ref:m}),(0,G.jsxs)(r.ZP,{item:!0,display:"flex",justifyContent:"space-between",alignItems:"center",children:[(0,G.jsxs)(r.ZP,{item:!0,display:"flex",alignItems:"center",children:[(0,G.jsx)(z.Z,{children:(0,G.jsx)(x.Z,{disableElevation:!0,disabled:""===g,type:"submit",size:"small",variant:"contained",color:"primary",onClick:i?async e=>{e.preventDefault();const n={message:g,taskID:t};H.updateByID(c,n).then((e=>{!0===e.data.success&&($.emit("comment",e.data.data),s(!a))})).catch((()=>{swal({text:"Sorry, something went wrong. Please contact to admin for support.",buttons:!1,timer:5e3,icon:"error"})}))}:async e=>{e.preventDefault();const a={message:g,taskID:t};!0===f&&(a.message=o),H.createNew(a).then((e=>{!0===e.data.success&&($.emit("comment",e.data.post),b(""),k(!1))})).catch((()=>{swal({text:"Sorry, something went wrong. Please contact to admin for support.",buttons:!1,timer:5e3,icon:"error"})}))},children:i?"Save":(0,G.jsx)(u.h9l,{size:20})})}),!0===a?(0,G.jsx)(l.Z,{"aria-label":"image",component:"label",onClick:()=>{s(!a)},children:(0,G.jsx)(u.kLi,{})}):null]}),(0,G.jsxs)(r.ZP,{item:!0,display:"flex",alignItems:"center",children:[(0,G.jsx)(l.Z,{"aria-label":"image",component:"label",onClick:()=>{m.current.focus(),w(!v)},children:(0,G.jsx)(u.hRw,{})}),(0,G.jsxs)(l.Z,{"aria-label":"image",component:"label",children:[(0,G.jsx)(u.yl$,{}),(0,G.jsx)("input",{type:"file",name:"image",multiple:!0,hidden:!0,onChange:async e=>{const a={taskID:t},n=await(0,R.Z)(e.target.files[0]);a.file=n,V.uploadFile(a).then((e=>{!0===e.data.success&&($.emit("upload",e.data.data),k(!0),b(e.data.data.file))})).catch((()=>{swal({text:"Sorry, something went wrong. Please contact to admin for support.",buttons:!1,timer:5e3,icon:"error"})}))}})]})]})]}),v&&(0,G.jsx)("div",{style:{position:"absolute",top:95,right:60},children:(0,G.jsx)(L.ZP,{previewConfig:{showPreview:!1},emojiStyle:"google",onEmojiClick:(e,t)=>{let{emoji:a}=e;const n=m.current;n.focus();const s=g.substring(0,n.selectionStart),r=g.substring(n.selectionStart);b(s+a+r),w(!1)}})})]})]})};const J=new W,K=(0,M.ZP)(T.h,{withCredentials:!0});var Q=e=>{let{taskID:t,fileComment:a}=e;const s=sessionStorage.getItem("id"),[o,l]=(0,n.useState)([]),[c,h]=(0,n.useState)(!1),[m,x]=(0,n.useState)(),u=e=>{J.getByTaskID(e).then((e=>{l(e.data.comment)}))},p=()=>{h(!1)};return(0,n.useEffect)((()=>{u(t),K.on("comment",(()=>{u(t)}))}),[t]),(0,G.jsxs)(G.Fragment,{children:[(0,G.jsx)(q,{taskId:t,inputWidth:435,fileMessage:a}),(0,G.jsx)(r.ZP,{height:400,sx:{mt:4,overflow:"hidden","&:hover":{overflowY:"auto","&::-webkit-scrollbar":{width:7},"&::-webkit-scrollbar-track":{background:"#f1f1f1",borderRadius:10},"&::-webkit-scrollbar-thumb":{background:"#888",borderRadius:10},"&::-webkit-scrollbar-thumb:hover":{background:"#555"}}},children:o.map((e=>{let a=new Date(e.createdAt).toLocaleString(),n=new Date(e.updatedAt).toLocaleString();return(0,G.jsxs)(r.ZP,{item:!0,display:"flex",alignItems:"flex-start",sx:{mt:2},children:[(0,G.jsx)(d.Z,{src:e.senderID.avatar.data,sx:{width:40,height:40,mr:1}}),(0,G.jsxs)(r.ZP,{children:[(0,G.jsxs)(r.ZP,{item:!0,display:"flex",alignItems:"center",children:[(0,G.jsx)(i.Z,{variant:"h3",sx:{mr:1},children:e.senderID.name}),(0,G.jsx)(i.Z,{variant:"subtitle1",children:a===n?a:"".concat(n," (fixed)")})]}),m===e._id&&!0===c?(0,G.jsx)(q,{taskId:t,onEdit:c,onClose:p,editMessage:e.message,commentId:m,inputWidth:435}):(0,G.jsxs)(G.Fragment,{children:[(0,G.jsx)(r.ZP,{sx:{width:435,p:1,borderRadius:2,boxShadow:4},children:(0,G.jsx)(i.Z,{variant:"h4",sx:{mr:1},children:e.message.url?(0,G.jsx)("a",{href:e.message.url,target:"_blank",children:e.message.name}):(0,G.jsx)(G.Fragment,{children:e.message})})}),(0,G.jsxs)(r.ZP,{item:!0,display:"flex",alignItems:"center",children:[!e.message.url&&(0,G.jsx)(G.Fragment,{children:e.senderID._id===s?(0,G.jsx)(i.Z,{variant:"subtitle1",sx:{mr:1,cursor:"pointer",textDecoration:"underline","&:hover":{color:"#90CAF9"}},onClick:()=>{return t=e._id,x(t),void h(!0);var t},children:"Edit"}):(0,G.jsx)(i.Z,{variant:"subtitle1",sx:{mr:1,cursor:"pointer",textDecoration:"underline","&:hover":{color:"#90CAF9"}},children:"Reply"})}),(0,G.jsx)(i.Z,{variant:"subtitle1",sx:{cursor:"pointer",textDecoration:"underline","&:hover":{color:"#90CAF9"}},onClick:()=>{return t=e._id,void swal({title:"Are you sure?",text:"Once deleted, you will not be able to recover.",icon:"warning",buttons:[!0,"Delete"],dangerMode:!0}).then((e=>{e&&J.deleteByID(t).then((e=>{200===e.status&&K.emit("comment",e.data)})).catch((()=>{swal({text:"Sorry, something went wrong. Please contact to admin for support.",buttons:!1,timer:5e3,icon:"error"})}))}));var t},children:"Delete"})]})]})]})]},e._id)}))})]})};const X=new A,ee=(0,M.ZP)(T.h,{withCredentials:!0});var te=e=>{let{taskID:t,show:a}=e;const[s,o]=(0,n.useState)([]),[l,c]=(0,n.useState)(),h=e=>{X.getFromTask().then((t=>{const a=[];t.data.data.map((t=>{t.taskID._id===e&&a.push(t)})),o(a)}))};return(0,n.useEffect)((()=>{h(t),ee.on("upload",(()=>{h(t)}))}),[t]),(0,G.jsxs)(G.Fragment,{children:[a&&(0,G.jsxs)(G.Fragment,{children:[(0,G.jsx)(r.ZP,{sx:{mt:2,paddingLeft:4},children:(0,G.jsx)(z.Z,{children:(0,G.jsxs)(x.Z,{variant:"contained",color:"primary",component:"label",children:["Choose file",(0,G.jsx)("input",{type:"file",id:"upload",multiple:!0,hidden:!0,onChange:async e=>{const a={taskID:t},n=await(0,R.Z)(e.target.files[0]);a.file=n,X.uploadFile(a).then((e=>{!0===e.data.success&&ee.emit("upload",e.data.data)})).catch((()=>{swal({text:"Sorry, something went wrong. Please contact to admin for support.",buttons:!1,timer:5e3,icon:"error"})}))}})]})})}),(0,G.jsx)(r.ZP,{maxHeight:250,sx:{paddingLeft:4,overflowY:"hidden","&:hover":{overflowY:"auto","&::-webkit-scrollbar":{width:7},"&::-webkit-scrollbar-track":{background:"#f1f1f1",borderRadius:10},"&::-webkit-scrollbar-thumb":{background:"#888",borderRadius:10},"&::-webkit-scrollbar-thumb:hover":{background:"#555"}}},children:s.map((e=>{let t=new Date(e.createdAt).toLocaleString();return(0,G.jsxs)(r.ZP,{sx:{mt:2,p:1,width:450,boxShadow:4,display:"flex",alignItems:"center"},children:["image/"===e.file.type.match(/[^:/]\w+\//)[0]?(0,G.jsx)(d.Z,{src:e.file.url,sx:{borderRadius:0,height:70,width:100}}):(0,G.jsx)(O.Z,{name:e.file.name,h:70,w:100,f:20}),(0,G.jsxs)(r.ZP,{sx:{ml:2},children:[(0,G.jsx)("a",{href:e.file.url,target:"_blank",style:{textDecoration:"none"},children:(0,G.jsx)(i.Z,{variant:"h3",children:e.file.name})}),(0,G.jsxs)(r.ZP,{container:!0,alignItems:"center",children:[(0,G.jsx)(i.Z,{variant:"subtitle1",children:t}),(0,G.jsx)(i.Z,{variant:"subtitle2",children:(0,G.jsx)(u.Zbb,{})}),(0,G.jsx)(i.Z,{variant:"subtitle1",sx:{cursor:"pointer",textDecoration:"underline","&:hover":{color:"#90CAF9"}},onClick:()=>{return t=e._id,void s.map((e=>{e._id===t&&c(e.file)}));var t},children:"Comment"}),(0,G.jsx)(i.Z,{variant:"subtitle2",children:(0,G.jsx)(u.Zbb,{})}),(0,G.jsx)(i.Z,{variant:"subtitle1",sx:{cursor:"pointer",textDecoration:"underline","&:hover":{color:"#90CAF9"}},onClick:()=>{return t=e._id,void swal({title:"Are you sure?",text:"Once deleted, you will not be able to recover.",icon:"warning",buttons:[!0,"Delete"],dangerMode:!0}).then((e=>{e&&X.deleteByID(t).then((e=>{200===e.status&&ee.emit("upload",e.data)})).catch((()=>{swal({text:"Sorry, something went wrong. Please contact to admin for support.",buttons:!1,timer:5e3,icon:"error"})}))}));var t},children:"Delete"})]})]})]},e._id)}))})]}),(0,G.jsxs)(r.ZP,{children:[(0,G.jsxs)(r.ZP,{container:!0,alignItems:"center",sx:{mt:4},children:[(0,G.jsx)(u.k04,{}),(0,G.jsx)(i.Z,{sx:{ml:1},color:"primary",variant:"h5",children:"Work:"})]}),(0,G.jsx)(Q,{taskID:t,fileComment:l})]})]})},ae=a(65661),ne=a(30829),se=a(99114);const re=new p.Z,ie=new _.Z,oe=(0,M.ZP)(T.h,{withCredentials:!0}),le=[{id:0,title:"Backlog"},{id:1,title:"To-Do"},{id:2,title:"Doing"},{id:3,title:"Done"}];var de=e=>{const{task:t,anchorEl:a,open:i,handleClose:o}=e,l=(0,s.s0)(),d=sessionStorage.getItem("id"),[h,m]=(0,n.useState)([]),[u,p]=(0,n.useState)(),[g,b]=(0,n.useState)(),[j,Z]=(0,n.useState)();return(0,n.useEffect)((()=>{var e;e=d,re.getAll().then((t=>{const a=[];t.data.data.map((t=>{t.member.map((n=>{n._id===e&&a.push(t)}))})),m(a)})),p(t.boardID),b(t.boardID),Z(t.status)}),[d]),(0,G.jsx)(c.Z,{anchorEl:a,id:"account-menu",open:i,onClose:o,PaperProps:{elevation:0,sx:{overflow:"visible",filter:"drop-shadow(0px 2px 8px rgba(0,0,0,0.32))",mt:1.5,"& .MuiAvatar-root":{width:80,height:80,ml:-.5,mr:1},"&:before":{content:'""',display:"block",position:"absolute",top:0,right:14,width:10,height:10,transform:"translateY(-50%) rotate(45deg)",zIndex:0}}},transformOrigin:{horizontal:"right",vertical:"top"},anchorOrigin:{horizontal:"right",vertical:"bottom"},children:(0,G.jsxs)(y.Z,{component:"form",onSubmit:()=>{ie.getAll().then((e=>{e.data.data.map((e=>{if(e._id===t._id){const t={boardID:g,status:j};ie.updateByID(e._id,t).then((e=>{!0===e.data.success&&(oe.emit("task",e.data.data),e.data.data.boardID!==u&&l("/b/".concat(e.data.data.boardID),{replace:!0}))})).catch((()=>{swal({text:"Sorry, something went wrong. Please contact to admin for support.",buttons:!1,timer:5e3,icon:"error"})}))}}))}))},noValidate:!0,sx:{width:250},children:[(0,G.jsx)(ae.Z,{display:"flex",justifyContent:"center",sx:{fontSize:16,fontWeight:500},children:"Move Task"}),(0,G.jsxs)(C.Z,{spacing:2,children:[(0,G.jsx)(ne.Z,{children:"Board"}),(0,G.jsx)(se.Z,{fullWidth:!0,native:!0,id:"board",value:g,onChange:e=>{b(e.target.value)},children:h.map((e=>(0,G.jsx)("option",{value:e._id,children:e._id===t.boardID?"".concat(e.name," (currently)"):e.name},e._id)))}),(0,G.jsxs)(r.ZP,{sx:{my:2},children:[(0,G.jsx)(ne.Z,{children:"List"}),(0,G.jsx)(se.Z,{fullWidth:!0,native:!0,id:"list",value:j,onChange:e=>{Z(e.target.value)},children:le.map((e=>(0,G.jsx)("option",{value:e.id,children:e.id===t.status?"".concat(e.title," (currently)"):e.title},e.id)))})]}),(0,G.jsx)(z.Z,{children:(0,G.jsx)(x.Z,{disableElevation:!0,size:"small",type:"submit",variant:"contained",color:"primary",children:"Move"})})]})]})})};const ce=new _.Z,he=new p.Z,me=new A,xe=(0,M.ZP)(T.h,{withCredentials:!0});var ue=e=>{const{open:t,onClose:a,formData:s,bId:o,status:l,dialogForm:d}=e,[c,h]=(0,n.useState)({}),[p,g]=(0,n.useState)(),[b,j]=(0,n.useState)(),[w,P]=(0,n.useState)(),[_,F]=(0,n.useState)(),[T,A]=(0,n.useState)([]),[M,R]=(0,n.useState)([]),[O,N]=(0,n.useState)(),[W,L]=(0,n.useState)(!1),[Y,H]=(0,n.useState)(!1),[U,V]=(0,n.useState)(null),$=Boolean(U),q=()=>{a(!t)},J=e=>{const t=e.target.name,a=e.target.value;h({...c,[t]:a})};return(0,n.useEffect)((()=>{0===d?(h({_id:"",task:""}),g(o),j(l),F(""),A([])):1===d&&(h(s),j(s.status),F(s.describe),void 0!==o&&he.getByID(o).then((e=>{R(e.data[0].member)})),0!==s.member.length&&(A(s.member),N(s._id),L(!0)),me.getFromTask().then((e=>{const t=[];e.data.data.map((e=>{e.taskID._id===s._id&&t.push(e)})),0!==t.length&&(N(s._id),H(!0))})))}),[d,s,o,l]),(0,G.jsx)(k.Z,{open:t,onClose:q,maxWidth:"lg",scroll:"body",children:(0,G.jsx)(y.Z,{component:"form",onSubmit:async e=>{e.preventDefault();const n=new FormData(e.currentTarget),s={task:n.get("task"),describe:_,member:T};""===s.task?D()({text:"Please enter a title for the task.",buttons:!1,timer:3e3,icon:"info"}):""===n.get("_id")?(s.status=b,s.boardID=p,ce.createNew(s).then((e=>{!0===e.data.success&&(xe.emit("task",e.data.data),a(!t))})).catch((()=>{D()({text:"Sorry, something went wrong. Please contact to admin for support.",buttons:!1,timer:5e3,icon:"error"})}))):ce.updateByID(n.get("_id"),s).then((e=>{!0===e.data.success&&(xe.emit("task",e.data.data),D()({text:"Successfully update task.",buttons:!1,timer:2e3,icon:"success"}),setTimeout((()=>{a(!t)}),2e3))})).catch((()=>{D()({text:"Sorry, something went wrong. Please contact to admin for support.",buttons:!1,timer:5e3,icon:"error"})}))},noValidate:!0,sx:{mt:1},children:(0,G.jsxs)(C.Z,{children:[(0,G.jsxs)(E.Z,{value:d,index:0,children:[(0,G.jsxs)(r.ZP,{sx:{display:"none"},children:[(0,G.jsx)(i.Z,{variant:"h4",children:"Id:"}),(0,G.jsx)(I.Z,{id:"_id",name:"_id",value:c._id,onChange:J,variant:"standard"})]}),(0,G.jsxs)(r.ZP,{container:!0,alignItems:"center",sx:{height:70},children:[(0,G.jsx)(i.Z,{sx:{mr:6},color:"primary",variant:"h5",children:"Task title:"}),(0,G.jsx)(I.Z,{id:"task",type:"text",value:c.task,name:"task",onChange:J,placeholder:"Enter task title"})]}),(0,G.jsxs)(r.ZP,{container:!0,alignItems:"center",justifyContent:"space-evenly",sx:{mt:4},children:[(0,G.jsx)(z.Z,{children:(0,G.jsx)(x.Z,{disableElevation:!0,size:"large",onClick:q,variant:"contained",color:"secondary",children:"Cancel"})}),(0,G.jsx)(z.Z,{children:(0,G.jsx)(x.Z,{disableElevation:!0,size:"large",type:"submit",variant:"contained",color:"primary",children:"Save"})})]})]}),(0,G.jsx)(E.Z,{value:d,index:1,children:(0,G.jsxs)(r.ZP,{item:!0,display:"flex",children:[(0,G.jsxs)(r.ZP,{sx:{width:500,mr:1},children:[(0,G.jsxs)(r.ZP,{sx:{display:"none"},children:[(0,G.jsx)(i.Z,{variant:"h4",children:"Id:"}),(0,G.jsx)(I.Z,{id:"_id",name:"_id",value:c._id,onChange:J,variant:"standard"})]}),(0,G.jsxs)(r.ZP,{item:!0,display:"flex",alignItems:"center",children:[(0,G.jsx)(u.bln,{}),(0,G.jsx)("textarea",{id:"task",className:"task-title",value:c.task,name:"task",onChange:J})]}),O===c._id&&W&&(0,G.jsxs)(r.ZP,{children:[(0,G.jsxs)(r.ZP,{container:!0,alignItems:"center",sx:{mt:2,mb:1},children:[(0,G.jsx)(u.SrG,{}),(0,G.jsx)(i.Z,{sx:{ml:1},color:"primary",variant:"h5",children:"Member:"})]}),(0,G.jsx)(r.ZP,{sx:{pl:4,pr:2},children:(0,G.jsx)(B.Z,{options:M,member:T,handleChange:(e,t)=>{A(t)}})})]}),(0,G.jsxs)(r.ZP,{children:[(0,G.jsxs)(r.ZP,{container:!0,alignItems:"center",sx:{mt:4},children:[(0,G.jsx)(u.MwG,{}),(0,G.jsx)(i.Z,{sx:{ml:1},color:"primary",variant:"h5",children:"Describe:"})]}),(0,G.jsx)(r.ZP,{sx:{paddingLeft:4},children:(0,G.jsx)(Z.Editor,{editorState:w,toolbarStyle:{width:439,border:"1px solid"},editorStyle:{color:"black",border:"1px solid",width:450,paddingRight:10,paddingLeft:10},onEditorStateChange:e=>{P(e),F(w&&f()((0,v.convertToRaw)(w.getCurrentContent())))},toolbar:{options:["inline","fontSize","fontFamily","list","textAlign","embedded","emoji","image","history"],list:{inDropdown:!0},textAlign:{inDropdown:!0},link:{inDropdown:!0}},placeholder:"Add more detailed description..."})})]}),(0,G.jsxs)(r.ZP,{children:[O===c._id&&Y&&(0,G.jsxs)(r.ZP,{container:!0,alignItems:"center",sx:{mt:4},children:[(0,G.jsx)(u.yl$,{}),(0,G.jsx)(i.Z,{sx:{ml:1},color:"primary",variant:"h5",children:"Attachments:"})]}),(0,G.jsx)(te,{taskID:c._id,show:Y})]})]}),(0,G.jsxs)(S.Z,{children:[(0,G.jsx)(i.Z,{variant:"subtitle1",sx:{mt:4},children:"Add to card"}),(0,G.jsxs)(m.Z,{sx:{mb:2,boxShadow:2},onClick:()=>{return e=c._id,N(e),void L(!W);var e},children:[(0,G.jsx)(r.ZP,{sx:{mr:1},children:(0,G.jsx)(u.f7T,{size:16})}),"Member"]}),(0,G.jsxs)(m.Z,{sx:{mb:2,boxShadow:2},children:[(0,G.jsx)(r.ZP,{sx:{mr:1},children:(0,G.jsx)(u.joI,{size:16})}),"Day"]}),(0,G.jsxs)(m.Z,{sx:{mb:2,boxShadow:2},onClick:()=>{return e=c._id,N(e),void H(!Y);var e},children:[(0,G.jsx)(r.ZP,{sx:{mr:1},children:(0,G.jsx)(u.yl$,{size:16})}),"Attach"]}),(0,G.jsx)(i.Z,{variant:"subtitle1",sx:{mt:4},children:"Manipulation"}),(0,G.jsxs)(m.Z,{sx:{mb:2,boxShadow:2},onClick:e=>{V(e.currentTarget)},children:[(0,G.jsx)(r.ZP,{sx:{mr:1},children:(0,G.jsx)(u.hg,{size:16})}),"Move"]}),(0,G.jsx)(de,{task:c,anchorEl:U,open:$,handleClose:()=>{V(null)}}),(0,G.jsxs)(m.Z,{sx:{mb:2,boxShadow:2},children:[(0,G.jsx)(r.ZP,{sx:{mr:1},children:(0,G.jsx)(u.fO3,{size:16})}),"Storage"]}),(0,G.jsx)(z.Z,{children:(0,G.jsx)(x.Z,{sx:{mt:4,ml:3},disableElevation:!0,size:"small",type:"submit",variant:"contained",color:"primary",children:"Save"})})]})]})})]})})})},pe=a(72627),ge=a(49900);const be=new _.Z,je=(0,M.ZP)(T.h,{withCredentials:!0});var Ze=e=>{let{item:t,bId:a}=e;const[s,i]=(0,n.useState)(!1);return(0,G.jsxs)(G.Fragment,{children:[(0,G.jsxs)(r.ZP,{container:!0,sx:{position:"relative",p:1},children:[(0,G.jsxs)(pe.Z,{sx:{borderRadius:2,width:215,backgroundColor:"white",display:"flex",flexDirection:"column",alignItems:"flex-start","&:hover":{backgroundColor:"rgb(250, 250, 250)"},"&:hover + .hide":{display:"block"}},onClick:()=>{i(!0)},onDragStart:e=>((e,t)=>{e.dataTransfer.setData("id",t)})(e,t._id),draggable:!0,children:[(0,G.jsx)(ge.Z,{primary:t.task}),t.member!==[]&&(0,G.jsx)("div",{style:{marginTop:10,display:"flex"},children:t.member.map((e=>(0,G.jsx)(d.Z,{src:e.avatar.data,sx:{width:24,height:24}},e._id)))})]}),(0,G.jsx)(r.ZP,{className:"hide",sx:{display:"none",cursor:"pointer",position:"absolute",top:18,right:4,minWidth:30,p:"0 0 0 0","&:hover":{display:"block",color:"#90CAF9"}},onClick:()=>{var e;e=t._id,swal({title:"Are you sure?",text:"Once deleted, you will not be able to recover.",icon:"warning",buttons:[!0,"Delete"],dangerMode:!0}).then((t=>{t&&be.deleteByID(e).then((e=>{200===e.status&&je.emit("task",e.data)})).catch((()=>{swal({text:"Sorry, something went wrong. Please contact to admin for support.",buttons:!1,timer:5e3,icon:"error"})}))}))},children:(0,G.jsx)(u.IT9,{})})]}),(0,G.jsx)(ue,{open:s,onClose:()=>{i(!1)},formData:t,bId:a,dialogForm:1})]})};const ve=new _.Z,we=(0,M.ZP)(T.h,{withCredentials:!0});var fe=e=>{let{list:t,item:a,bId:s}=e;const[o,l]=(0,n.useState)(!1);return(0,G.jsxs)(G.Fragment,{children:[(0,G.jsxs)(b.Z,{sx:{width:240,height:"fit-content",borderRadius:2,backgroundColor:"rgba(255, 255, 255, 0.5)"},variant:"outlined",children:[(0,G.jsx)(j.Z,{sx:{backgroundColor:"".concat(t.bgColor),height:100,display:"flex",justifyContent:"center",alignItems:"center"},children:(0,G.jsx)(i.Z,{variant:"h3",sx:{color:"white"},children:t.title})}),(0,G.jsx)(r.ZP,{sx:{height:285,overflowY:"hidden","&:hover":{overflowY:"auto","&::-webkit-scrollbar":{width:7},"&::-webkit-scrollbar-track":{background:"#f1f1f1",borderRadius:10},"&::-webkit-scrollbar-thumb":{background:"#888",borderRadius:10},"&::-webkit-scrollbar-thumb:hover":{background:"#555"}}},onDragOver:e=>(e=>{e.preventDefault()})(e),onDrop:e=>((e,t)=>{let a=e.dataTransfer.getData("id");ve.getAll().then((e=>{e.data.data.map((e=>{if(e._id===a){const a={status:t};ve.updateByID(e._id,a).then((e=>{!0===e.data.success&&we.emit("task",e.data.data)})).catch((()=>{swal({text:"Sorry, something went wrong. Please contact to admin for support.",buttons:!1,timer:5e3,icon:"error"})}))}}))}))})(e,t.id),children:a.map((e=>(0,G.jsx)("div",{children:e.status===t.id&&(0,G.jsx)(Ze,{item:e,bId:s})},e._id)))}),(0,G.jsx)(x.Z,{variant:"contained",sx:{mx:1,my:2,borderRadius:2,height:40,width:212},onClick:()=>{l(!0)},startIcon:(0,G.jsx)(u.SC9,{size:20}),children:"Add task"})]}),(0,G.jsx)(ue,{open:o,onClose:()=>{l(!1)},bId:s,status:t.id,dialogForm:0})]})},ke=a(97815);const ye=new p.Z,Ce=(0,M.ZP)(T.h,{withCredentials:!0}),Ie=[{id:0,title:"Backlog",bgColor:"rgb(4, 124, 188)"},{id:1,title:"To-Do",bgColor:"rgb(236, 92, 68)"},{id:2,title:"Doing",bgColor:"rgb(236, 92, 68)"},{id:3,title:"Done",bgColor:"rgb(100, 188, 76)"}];var Se=()=>{const{boardId:e}=(0,s.UO)(),t=(0,s.s0)(),[a,p]=(0,n.useState)(!1),[b,j]=(0,n.useState)({}),[Z,v]=(0,n.useState)({}),[w,f]=(0,n.useState)([]),[k,y]=(0,n.useState)([]),[C,I]=(0,n.useState)(null),[S,P]=(0,n.useState)(),D=Boolean(C),[_,F]=(0,n.useState)(!1),[T,A]=(0,n.useState)(!1),z=()=>{I(null)},E=e=>{ye.getByID(e).then((e=>{j(e.data[0]),v(e.data[0].bgImg),f(e.data[0].tasks),y(e.data[0].member)}))};return(0,n.useEffect)((()=>{E(e),Ce.on("board",(()=>{E(e)})),Ce.on("task",(()=>{E(e)}))}),[e]),(0,G.jsxs)(G.Fragment,{children:[(0,G.jsxs)(r.ZP,{container:!0,justifyContent:"space-between",alignItems:"center",sx:{mb:2,px:2},children:[(0,G.jsx)(i.Z,{variant:"h2",sx:{fontWeight:500},children:b.name}),(0,G.jsxs)(r.ZP,{item:!0,display:"flex",children:[(0,G.jsx)(r.ZP,{sx:{mr:2},children:(0,G.jsx)(ke.Z,{page:"board",id:S,check:T,checkNone:_,member:b.member,handleFilterNone:t=>{F(t.target.checked),A(!1),ye.getByID(e).then((e=>{let a=[];e.data[0].tasks.map((e=>{0===e.member.length&&a.push(e)})),!0===t.target.checked?f(a):f(e.data[0].tasks)}))},handleFilter:(t,a)=>{P(a),F(!1),A(t.target.checked),ye.getByID(e).then((e=>{let n=[];e.data[0].tasks.map((e=>{e.member.map((t=>{t._id===a&&n.push(e)}))})),!0===t.target.checked?f(n):f(e.data[0].tasks)}))}})}),k.map((e=>(0,G.jsxs)("div",{children:[(0,G.jsx)(o.Z,{title:e.name,children:(0,G.jsx)(l.Z,{onClick:t=>{return a=t,n=e._id,I(a.currentTarget),void P(n);var a,n},"aria-controls":D?"account-menu":void 0,"aria-haspopup":"true","aria-expanded":D?"true":void 0,children:(0,G.jsx)(d.Z,{src:e.avatar.data,sx:{width:30,height:30}})})}),S===e._id&&(0,G.jsxs)(c.Z,{anchorEl:C,id:"account-menu",open:D,onClose:z,PaperProps:{elevation:0,sx:{overflow:"visible",filter:"drop-shadow(0px 2px 8px rgba(0,0,0,0.32))",mt:1.5,"& .MuiAvatar-root":{width:80,height:80,ml:-.5,mr:1},"&:before":{content:'""',display:"block",position:"absolute",top:0,right:14,width:10,height:10,transform:"translateY(-50%) rotate(45deg)",zIndex:0}}},transformOrigin:{horizontal:"right",vertical:"top"},anchorOrigin:{horizontal:"right",vertical:"bottom"},children:[(0,G.jsxs)(r.ZP,{container:!0,justifyContent:"center",alignItems:"center",sx:{p:3},children:[(0,G.jsx)(d.Z,{alt:"profile user",src:e.avatar.data,sx:{mr:2}}),(0,G.jsxs)(r.ZP,{children:[(0,G.jsx)(i.Z,{variant:"h3",children:e.name}),(0,G.jsx)(i.Z,{variant:"subtitle2",children:e.email})]})]}),(0,G.jsx)(h.Z,{}),(0,G.jsx)(m.Z,{onClick:()=>t("/u/profile/".concat(e._id),{replace:!0}),children:"View profile"})]})]},e._id))),(0,G.jsx)(x.Z,{variant:"contained",sx:{ml:2,height:"fit-content"},onClick:()=>{p(!0)},startIcon:(0,G.jsx)(u.TRY,{size:20}),children:"Edit"})]})]}),(0,G.jsx)(r.ZP,{container:!0,justifyContent:"space-evenly",sx:{py:2,backgroundImage:"url('".concat(Z.data,"')"),backgroundSize:"cover",backgroundRepeat:"no-repeat",backgroundClip:"border-box"},children:Ie.map((t=>(0,G.jsx)(fe,{list:t,item:w,bId:e},t.id)))}),(0,G.jsx)(g.Z,{open:a,onClose:()=>{p(!1)},formData:b,wsId:b.workSpaceID,dialogForm:1})]})}}}]);
//# sourceMappingURL=37.4600f5f3.chunk.js.map