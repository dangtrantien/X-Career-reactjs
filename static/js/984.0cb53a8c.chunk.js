"use strict";(self.webpackChunkx_career_reactjs=self.webpackChunkx_career_reactjs||[]).push([[984],{1984:function(e,t,a){a.r(t),a.d(t,{default:function(){return ue}});var s=a(72791),n=a(16871),r=a(61889),i=a(20890),o=a(93044),l=a(24518),d=a(58956),c=a(32065),h=a(89554),x=a(57621),m=a(39504),u=a(51802),g=a(72010),b=a(39029),p=a.n(b),j=(a(25646),a(5289)),Z=a(64554),w=a(39157),v=a(28029),k=a(25028),f=a(23786),y=a(62062),I=a.n(y),S=a(82388),C=a(39910);class D extends C.T{constructor(){super({endpoint:"api/tasks"}),this.createNew=async e=>await(0,S.Z)({method:"POST",url:"".concat(this.api,"/").concat(this.endpoint,"/createTask"),data:{task:e}}),this.getAll=async()=>await(0,S.Z)({method:"GET",url:"".concat(this.api,"/").concat(this.endpoint,"/getAllTasksOfAllBoards"),data:null}),this.updateByID=async(e,t)=>await(0,S.Z)({method:"PUT",url:"".concat(this.api,"/").concat(this.endpoint,"/updateTaskByID?id=").concat(e),data:{task:t}})}}var P=a(73243),_=a(31400),F=a(32369);const A=sessionStorage.getItem("token");class T extends C.T{constructor(){super({endpoint:"api/comments"}),this.createNew=async e=>await(0,S.Z)({headers:{Authorization:"Bearer ".concat(A)},method:"POST",url:"".concat(this.api,"/").concat(this.endpoint,"/addComment"),data:{comment:e}}),this.getByTaskID=async e=>await(0,S.Z)({method:"GET",url:"".concat(this.api,"/").concat(this.endpoint,"/getCommentByTaskID?id=").concat(e),data:null}),this.updateByID=async(e,t)=>await(0,S.Z)({method:"PUT",url:"".concat(this.api,"/").concat(this.endpoint,"/updateCommentByID?id=").concat(e),data:{comment:t}})}}var E=a(26594),R=a(13400),B=a(98955),z=a(54233);class O extends C.T{constructor(){super({endpoint:"api/uploads"}),this.uploadFile=async e=>await(0,S.Z)({method:"POST",url:"".concat(this.api,"/").concat(this.endpoint,"/uploadFile"),data:{upload:e}}),this.getFromTask=async()=>await(0,S.Z)({method:"GET",url:"".concat(this.api,"/").concat(this.endpoint,"/getAllFilesOfAllTasks"),data:null}),this.getFromComment=async()=>await(0,S.Z)({method:"GET",url:"".concat(this.api,"/").concat(this.endpoint,"/getAllFilesOfAllComments"),data:null})}}var L=a(44428),M=a(80184);const N=new T,G=new z.Z,Y=new O,W=(0,L.ZP)(C.h);var U=e=>{const{taskId:t,onEdit:a,onClose:n,message:i,commentId:c}=e,h=(0,s.createRef)(),x=sessionStorage.getItem("id"),[m,u]=(0,s.useState)(""),[g,b]=(0,s.useState)({}),[p,j]=(0,s.useState)(!1);return(0,s.useEffect)((()=>{G.getByID(x).then((e=>{b(e.data[0])})),i&&u(i)}),[x,i]),(0,M.jsxs)(r.ZP,{container:!0,alignItems:"flex-start",sx:{mt:1},children:[!i&&g.avatar&&(0,M.jsx)(o.Z,{src:g.avatar.data,sx:{width:40,height:40,mr:1}}),(0,M.jsxs)(r.ZP,{sx:{p:1,borderRadius:2,boxShadow:4,position:"relative"},children:[(0,M.jsx)("textarea",{className:"comment",placeholder:"Write a comment...",value:m,onChange:e=>{e.target.style.height="auto",e.target.style.height=e.target.scrollHeight+"px",u(e.target.value)},ref:h}),(0,M.jsxs)(r.ZP,{item:!0,display:"flex",justifyContent:"space-between",alignItems:"center",children:[(0,M.jsxs)(r.ZP,{item:!0,display:"flex",alignItems:"center",children:[(0,M.jsx)(P.Z,{children:(0,M.jsx)(l.Z,{disableElevation:!0,disabled:""===m,type:"submit",size:"small",variant:"contained",color:"primary",onClick:i?async e=>{e.preventDefault();const s={message:m,taskID:t};N.updateByID(c,s).then((e=>{!0===e.data.success&&(W.emit("comment",e.data.data),n(!a))})).catch((()=>{swal({text:"Sorry, something went wrong. Please contact to admin for support.",buttons:!1,timer:5e3,icon:"error"})}))}:async e=>{e.preventDefault();const a={message:m,taskID:t};N.createNew(a).then((e=>{!0===e.data.success&&(W.emit("comment",e.data.post),u(""))})).catch((()=>{swal({text:"Sorry, something went wrong. Please contact to admin for support.",buttons:!1,timer:5e3,icon:"error"})}))},children:i?"Save":(0,M.jsx)(d.h9l,{size:20})})}),!0===a?(0,M.jsx)(R.Z,{"aria-label":"image",component:"label",onClick:()=>{n(!a)},children:(0,M.jsx)(d.kLi,{})}):null]}),(0,M.jsxs)(r.ZP,{item:!0,display:"flex",alignItems:"center",children:[(0,M.jsx)(R.Z,{"aria-label":"image",component:"label",onClick:()=>{h.current.focus(),j(!p)},children:(0,M.jsx)(d.hRw,{})}),(0,M.jsxs)(R.Z,{"aria-label":"image",component:"label",children:[(0,M.jsx)(d.yl$,{}),(0,M.jsx)("input",{type:"file",name:"image",multiple:!0,hidden:!0,onChange:async e=>{const a={taskID:t},s=await(0,E.Z)(e.target.files[0]);a.file=s,Y.uploadFile(a).then((e=>{!0===e.data.success&&(W.emit("upload",e.data.data),u(e.data.data.file.url))})).catch((()=>{swal({text:"Sorry, something went wrong. Please contact to admin for support.",buttons:!1,timer:5e3,icon:"error"})}))}})]})]})]}),p&&(0,M.jsx)("div",{style:{position:"absolute",top:95,right:60},children:(0,M.jsx)(B.ZP,{previewConfig:{showPreview:!1},emojiStyle:"google",onEmojiClick:(e,t)=>{let{emoji:a}=e;const s=h.current;s.focus();const n=m.substring(0,s.selectionStart),r=m.substring(s.selectionStart);u(n+a+r),j(!1)}})})]})]})};const $=new T,H=(0,L.ZP)(C.h);var V=e=>{let{taskID:t}=e;const a=sessionStorage.getItem("id"),[n,l]=(0,s.useState)([]),[d,c]=(0,s.useState)(!1),[h,x]=(0,s.useState)(),m=e=>{$.getByTaskID(e).then((e=>{l(e.data.comment)}))},u=e=>{x(e),c(!0)},g=()=>{c(!1)},b=()=>{},p=e=>{swal({title:"Are you sure?",text:"Once deleted, you will not be able to recover.",icon:"warning",buttons:[!0,"Delete"],dangerMode:!0}).then((t=>{t&&$.deleteByID(e).then((e=>{200===e.status&&H.emit("comment",e.data)})).catch((()=>{swal({text:"Sorry, something went wrong. Please contact to admin for support.",buttons:!1,timer:5e3,icon:"error"})}))}))};return(0,s.useEffect)((()=>{m(t),H.on("comment",(()=>{m(t)}))}),[t]),(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)(U,{taskId:t}),(0,M.jsx)(r.ZP,{height:400,sx:{mt:4,overflow:"hidden","&:hover":{overflowY:"auto","&::-webkit-scrollbar":{width:7},"&::-webkit-scrollbar-track":{background:"#f1f1f1",borderRadius:10},"&::-webkit-scrollbar-thumb":{background:"#888",borderRadius:10},"&::-webkit-scrollbar-thumb:hover":{background:"#555"}}},children:n.map((e=>{let s=new Date(e.createdAt).toLocaleString(),n=new Date(e.updatedAt).toLocaleString();return(0,M.jsxs)(r.ZP,{item:!0,display:"flex",alignItems:"flex-start",sx:{mt:2},children:[(0,M.jsx)(o.Z,{src:e.senderID.avatar.data,sx:{width:40,height:40,mr:1}}),(0,M.jsxs)(r.ZP,{children:[(0,M.jsxs)(r.ZP,{item:!0,display:"flex",alignItems:"center",children:[(0,M.jsx)(i.Z,{variant:"h3",sx:{mr:1},children:e.senderID.name}),(0,M.jsx)(i.Z,{variant:"subtitle1",children:s===n?s:"".concat(n," (fixed)")})]}),!1===d?(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)(r.ZP,{sx:{width:435,p:1,borderRadius:2,boxShadow:4},children:(0,M.jsx)(i.Z,{variant:"h4",sx:{mr:1},children:e.message})}),(0,M.jsxs)(r.ZP,{item:!0,display:"flex",alignItems:"center",sx:{position:"relative"},children:[e.senderID._id===a?(0,M.jsx)(i.Z,{variant:"subtitle1",sx:{mr:1,cursor:"pointer",textDecoration:"underline","&:hover":{color:"#90CAF9"}},onClick:()=>u(e._id),children:"Edit"}):(0,M.jsx)(i.Z,{variant:"subtitle1",sx:{mr:1,cursor:"pointer",textDecoration:"underline","&:hover":{color:"#90CAF9"}},onClick:b,children:"Reply"}),(0,M.jsx)(i.Z,{variant:"subtitle1",sx:{cursor:"pointer",textDecoration:"underline","&:hover":{color:"#90CAF9"}},onClick:()=>p(e._id),children:"Delete"})]})]}):(0,M.jsx)(M.Fragment,{children:h===e._id?(0,M.jsx)(U,{taskId:t,onEdit:d,onClose:g,message:e.message,commentId:h}):(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)(r.ZP,{sx:{width:450,p:1,borderRadius:2,boxShadow:4},children:(0,M.jsx)(i.Z,{variant:"h4",sx:{mr:1},children:e.message})}),(0,M.jsxs)(r.ZP,{item:!0,display:"flex",alignItems:"center",children:[e.senderID._id===a?(0,M.jsx)(i.Z,{variant:"subtitle1",sx:{mr:1,cursor:"pointer",textDecoration:"underline","&:hover":{color:"#90CAF9"}},onClick:()=>u(e._id),children:"Edit"}):(0,M.jsx)(i.Z,{variant:"subtitle1",sx:{mr:1,cursor:"pointer",textDecoration:"underline","&:hover":{color:"#90CAF9"}},onClick:b,children:"Reply"}),(0,M.jsx)(i.Z,{variant:"subtitle1",sx:{cursor:"pointer",textDecoration:"underline","&:hover":{color:"#90CAF9"}},onClick:()=>p(e._id),children:"Delete"})]})]})})]})]},e._id)}))})]})},q=a(76278),J=a(62915);const K=new O,Q=(0,L.ZP)(C.h);var X=e=>{let{taskID:t}=e;(0,n.s0)();const[a,c]=(0,s.useState)([]),h=e=>{K.getFromTask().then((t=>{const a=[];t.data.data.map((t=>{t.taskID._id===e&&a.push(t)})),c(a)}))};return(0,s.useEffect)((()=>{h(t),Q.on("upload",(()=>{h(t)}))}),[t]),(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)(r.ZP,{sx:{mt:2,paddingLeft:4},children:(0,M.jsx)(P.Z,{children:(0,M.jsxs)(l.Z,{variant:"contained",color:"primary",component:"label",children:["Choose file",(0,M.jsx)("input",{type:"file",name:"file",multiple:!0,hidden:!0,onChange:async e=>{const a={taskID:t},s=await(0,E.Z)(e.target.files[0]);a.file=s,K.uploadFile(a).then((e=>{!0===e.data.success&&Q.emit("upload",e.data.data)})).catch((()=>{swal({text:"Sorry, something went wrong. Please contact to admin for support.",buttons:!1,timer:5e3,icon:"error"})}))}})]})})}),(0,M.jsx)(r.ZP,{maxHeight:250,sx:{paddingLeft:4,overflowY:"hidden","&:hover":{overflowY:"auto","&::-webkit-scrollbar":{width:7},"&::-webkit-scrollbar-track":{background:"#f1f1f1",borderRadius:10},"&::-webkit-scrollbar-thumb":{background:"#888",borderRadius:10},"&::-webkit-scrollbar-thumb:hover":{background:"#555"}}},children:a.map((e=>{let t=new Date(e.createdAt).toLocaleString();return(0,M.jsx)("a",{href:e.file.url,target:"_blank",style:{textDecoration:"none"},children:(0,M.jsxs)(q.Z,{sx:{mt:2,p:1,width:450,boxShadow:4,display:"flex",alignItems:"center"},children:["image/"===e.file.type.match(/[^:/]\w+\//)[0]?(0,M.jsx)(o.Z,{src:e.file.url,sx:{borderRadius:0,height:70,width:110}}):(0,M.jsx)(J.Z,{name:e.file.name,h:70,w:110,f:32}),(0,M.jsxs)(r.ZP,{sx:{ml:2},children:[(0,M.jsx)(i.Z,{variant:"h3",children:e.file.name}),(0,M.jsxs)(r.ZP,{container:!0,alignItems:"center",children:[(0,M.jsx)(i.Z,{variant:"subtitle1",children:"Added"}),(0,M.jsx)(i.Z,{variant:"subtitle2",children:(0,M.jsx)(d.Zbb,{})}),(0,M.jsx)(i.Z,{variant:"subtitle1",children:t}),(0,M.jsx)(i.Z,{variant:"subtitle2",children:(0,M.jsx)(d.Zbb,{})}),(0,M.jsx)(i.Z,{variant:"subtitle1",sx:{cursor:"pointer",textDecoration:"underline","&:hover":{color:"#90CAF9"}},onClick:()=>{return t=e._id,void swal({title:"Are you sure?",text:"Once deleted, you will not be able to recover.",icon:"warning",buttons:[!0,"Delete"],dangerMode:!0}).then((e=>{e&&K.deleteByID(t).then((e=>{200===e.status&&Q.emit("upload",e.data)})).catch((()=>{swal({text:"Sorry, something went wrong. Please contact to admin for support.",buttons:!1,timer:5e3,icon:"error"})}))}));var t},children:"Delete"})]})]})]})},e._id)}))})]})};const ee=new D,te=new c.Z,ae=(0,L.ZP)(C.h);var se=e=>{const{open:t,onClose:a,formData:n,bId:o,status:c,dialogForm:h}=e,[x,m]=(0,s.useState)({}),[b,y]=(0,s.useState)(),[S,C]=(0,s.useState)(),[D,A]=(0,s.useState)(),[T,E]=(0,s.useState)(),[R,B]=(0,s.useState)([]),[z,O]=(0,s.useState)([]),[L,N]=(0,s.useState)(),[G,Y]=(0,s.useState)(!1),[W,U]=(0,s.useState)(!1),$=()=>{a(!t)},H=e=>{const t=e.target.name,a=e.target.value;m({...x,[t]:a})};return(0,s.useEffect)((()=>{0===h?(m({_id:"",task:""}),y(o),C(c),E(""),B([])):1===h&&(m(n),C(n.status),E(n.describe),B(n.member),void 0!==o&&te.getByID(o).then((e=>{O(e.data[0].member)})),ae.on("upload",(()=>{U(!0)})))}),[h,n,o,c]),(0,M.jsx)(j.Z,{open:t,onClose:$,maxWidth:"lg",scroll:"body",children:(0,M.jsx)(Z.Z,{component:"form",onSubmit:async e=>{e.preventDefault();const s=new FormData(e.currentTarget),n={task:s.get("task"),describe:T,member:R};""===n.task?I()({text:"Please enter a title for the task.",buttons:!1,timer:3e3,icon:"info"}):""===s.get("_id")?(n.status=S,n.boardID=b,ee.createNew(n).then((e=>{!0===e.data.success&&(ae.emit("task",e.data.data),a(!t))})).catch((()=>{I()({text:"Sorry, something went wrong. Please contact to admin for support.",buttons:!1,timer:5e3,icon:"error"})}))):ee.updateByID(s.get("_id"),n).then((e=>{!0===e.data.success&&(ae.emit("task",e.data.data),I()({text:"Successfully update task.",buttons:!1,timer:2e3,icon:"success"}),setTimeout((()=>{a(!t)}),2e3))})).catch((()=>{I()({text:"Sorry, something went wrong. Please contact to admin for support.",buttons:!1,timer:5e3,icon:"error"})}))},noValidate:!0,sx:{mt:1},children:(0,M.jsxs)(w.Z,{children:[(0,M.jsxs)(_.Z,{value:h,index:0,children:[(0,M.jsxs)(r.ZP,{sx:{display:"none"},children:[(0,M.jsx)(i.Z,{variant:"h4",children:"Id:"}),(0,M.jsx)(v.Z,{id:"_id",name:"_id",value:x._id,onChange:H,variant:"standard"})]}),(0,M.jsxs)(r.ZP,{container:!0,alignItems:"center",sx:{height:70},children:[(0,M.jsx)(i.Z,{sx:{mr:6},color:"primary",variant:"h5",children:"Task title:"}),(0,M.jsx)(v.Z,{id:"task",type:"text",value:x.task,name:"task",onChange:H,placeholder:"Enter task title"})]}),(0,M.jsxs)(r.ZP,{container:!0,alignItems:"center",justifyContent:"space-evenly",sx:{mt:4},children:[(0,M.jsx)(P.Z,{children:(0,M.jsx)(l.Z,{disableElevation:!0,size:"large",onClick:$,variant:"contained",color:"secondary",children:"Cancel"})}),(0,M.jsx)(P.Z,{children:(0,M.jsx)(l.Z,{disableElevation:!0,size:"large",type:"submit",variant:"contained",color:"primary",children:"Save"})})]})]}),(0,M.jsx)(_.Z,{value:h,index:1,children:(0,M.jsxs)(r.ZP,{item:!0,display:"flex",children:[(0,M.jsxs)(r.ZP,{sx:{width:500,mr:1},children:[(0,M.jsxs)(r.ZP,{sx:{display:"none"},children:[(0,M.jsx)(i.Z,{variant:"h4",children:"Id:"}),(0,M.jsx)(v.Z,{id:"_id",name:"_id",value:x._id,onChange:H,variant:"standard"})]}),(0,M.jsxs)(r.ZP,{item:!0,display:"flex",alignItems:"center",children:[(0,M.jsx)(d.bln,{}),(0,M.jsx)("textarea",{id:"task",className:"task-title",value:x.task,name:"task",onChange:H})]}),G&&L===x._id&&(0,M.jsxs)(r.ZP,{children:[(0,M.jsxs)(r.ZP,{container:!0,alignItems:"center",sx:{mt:2,mb:1},children:[(0,M.jsx)(d.SrG,{}),(0,M.jsx)(i.Z,{sx:{ml:1},color:"primary",variant:"h5",children:"Member:"})]}),(0,M.jsx)(r.ZP,{sx:{paddingLeft:4},children:(0,M.jsx)(F.Z,{options:z,member:R,handleChange:(e,t)=>{B(t)}})})]}),(0,M.jsxs)(r.ZP,{children:[(0,M.jsxs)(r.ZP,{container:!0,alignItems:"center",sx:{mt:4},children:[(0,M.jsx)(d.MwG,{}),(0,M.jsx)(i.Z,{sx:{ml:1},color:"primary",variant:"h5",children:"Describe:"})]}),(0,M.jsx)(r.ZP,{sx:{paddingLeft:4},children:(0,M.jsx)(u.Editor,{editorState:D,toolbarStyle:{width:439,border:"1px solid"},editorStyle:{color:"black",border:"1px solid",width:450,paddingRight:10,paddingLeft:10},onEditorStateChange:e=>{A(e),E(D&&p()((0,g.convertToRaw)(D.getCurrentContent())))},toolbar:{options:["inline","fontSize","fontFamily","list","textAlign","embedded","emoji","image","history"],list:{inDropdown:!0},textAlign:{inDropdown:!0},link:{inDropdown:!0}},placeholder:"Add more detailed description..."})})]}),W&&L===x._id&&(0,M.jsxs)(r.ZP,{children:[(0,M.jsxs)(r.ZP,{container:!0,alignItems:"center",sx:{mt:4},children:[(0,M.jsx)(d.yl$,{}),(0,M.jsx)(i.Z,{sx:{ml:1},color:"primary",variant:"h5",children:"Attachments:"})]}),(0,M.jsx)(X,{taskID:x._id})]}),(0,M.jsxs)(r.ZP,{children:[(0,M.jsxs)(r.ZP,{container:!0,alignItems:"center",sx:{mt:4},children:[(0,M.jsx)(d.k04,{}),(0,M.jsx)(i.Z,{sx:{ml:1},color:"primary",variant:"h5",children:"Work:"})]}),(0,M.jsx)(V,{taskID:x._id})]})]}),(0,M.jsxs)(k.Z,{children:[(0,M.jsx)(i.Z,{variant:"subtitle1",sx:{mt:4},children:"Add to card"}),(0,M.jsxs)(f.Z,{sx:{mb:2,boxShadow:2},onClick:()=>{return e=x._id,N(e),void Y(!G);var e},children:[(0,M.jsx)(r.ZP,{sx:{mr:1},children:(0,M.jsx)(d.f7T,{size:16})}),"Member"]}),(0,M.jsxs)(f.Z,{sx:{mb:2,boxShadow:2},children:[(0,M.jsx)(r.ZP,{sx:{mr:1},children:(0,M.jsx)(d.joI,{size:16})}),"Day"]}),(0,M.jsxs)(f.Z,{sx:{mb:2,boxShadow:2},onClick:()=>{return e=x._id,N(e),void U(!W);var e},children:[(0,M.jsx)(r.ZP,{sx:{mr:1},children:(0,M.jsx)(d.yl$,{size:16})}),"Attach"]}),(0,M.jsx)(i.Z,{variant:"subtitle1",sx:{mt:4},children:"Manipulation"}),(0,M.jsxs)(f.Z,{sx:{mb:2,boxShadow:2},children:[(0,M.jsx)(r.ZP,{sx:{mr:1},children:(0,M.jsx)(d.hg,{size:16})}),"Move"]}),(0,M.jsxs)(f.Z,{sx:{mb:2,boxShadow:2},children:[(0,M.jsx)(r.ZP,{sx:{mr:1},children:(0,M.jsx)(d.fO3,{size:16})}),"Storage"]}),(0,M.jsx)(P.Z,{children:(0,M.jsx)(l.Z,{sx:{mt:4,ml:3},disableElevation:!0,size:"small",type:"submit",variant:"contained",color:"primary",children:"Save"})})]})]})})]})})})},ne=a(49900);const re=new D,ie=(0,L.ZP)(C.h);var oe=e=>{let{item:t,bId:a}=e;const[n,i]=(0,s.useState)(!1);return(0,M.jsxs)(M.Fragment,{children:[(0,M.jsxs)(r.ZP,{container:!0,sx:{position:"relative",p:1},children:[(0,M.jsxs)(q.Z,{sx:{borderRadius:2,width:215,backgroundColor:"white","&:hover":{backgroundColor:"rgb(250, 250, 250)"},"&:hover + .hide":{display:"block"}},onClick:()=>{i(!0)},onDragStart:e=>((e,t)=>{e.dataTransfer.setData("id",t)})(e,t._id),draggable:!0,children:[(0,M.jsx)(ne.Z,{primary:t.task}),t.member!==[]?(0,M.jsx)("div",{style:{marginRight:10,display:"flex"},children:t.member.map((e=>(0,M.jsx)(o.Z,{src:e.avatar.data,sx:{width:24,height:24}},e._id)))}):(0,M.jsx)(M.Fragment,{})]}),(0,M.jsx)(r.ZP,{className:"hide",sx:{display:"none",cursor:"pointer",position:"absolute",top:18,right:4,minWidth:30,p:"0 0 0 0","&:hover":{display:"block",color:"#90CAF9"}},onClick:()=>{var e;e=t._id,swal({title:"Are you sure?",text:"Once deleted, you will not be able to recover.",icon:"warning",buttons:[!0,"Delete"],dangerMode:!0}).then((t=>{t&&re.deleteByID(e).then((e=>{200===e.status&&ie.emit("task",e.data)})).catch((()=>{swal({text:"Sorry, something went wrong. Please contact to admin for support.",buttons:!1,timer:5e3,icon:"error"})}))}))},children:(0,M.jsx)(d.IT9,{})})]}),(0,M.jsx)(se,{open:n,onClose:()=>{i(!1)},formData:t,bId:a,dialogForm:1})]})};const le=new D,de=(0,L.ZP)(C.h);var ce=e=>{let{list:t,item:a,bId:n}=e;const[o,c]=(0,s.useState)(!1);return(0,M.jsxs)(M.Fragment,{children:[(0,M.jsxs)(x.Z,{sx:{width:240,height:"fit-content",borderRadius:2,backgroundColor:"rgba(255, 255, 255, 0.5)"},variant:"outlined",children:[(0,M.jsx)(m.Z,{sx:{backgroundColor:"".concat(t.bgColor),height:100,display:"flex",justifyContent:"center",alignItems:"center"},children:(0,M.jsx)(i.Z,{variant:"h3",sx:{color:"white"},children:t.title})}),(0,M.jsx)(r.ZP,{sx:{height:285,overflowY:"hidden","&:hover":{overflowY:"auto","&::-webkit-scrollbar":{width:7},"&::-webkit-scrollbar-track":{background:"#f1f1f1",borderRadius:10},"&::-webkit-scrollbar-thumb":{background:"#888",borderRadius:10},"&::-webkit-scrollbar-thumb:hover":{background:"#555"}}},onDragOver:e=>(e=>{e.preventDefault()})(e),onDrop:e=>((e,t)=>{let a=e.dataTransfer.getData("id");le.getAll().then((e=>{e.data.data.map((e=>{if(e.boardID._id===n&&e._id===a){const a={status:t};le.updateByID(e._id,a).then((e=>{!0===e.data.success&&de.emit("task",e.data.data)})).catch((()=>{swal({text:"Sorry, something went wrong. Please contact to admin for support.",buttons:!1,timer:5e3,icon:"error"})}))}}))}))})(e,t.id),children:a.map((e=>(0,M.jsx)("div",{children:e.status===t.id&&(0,M.jsx)(oe,{item:e,bId:n})},e._id)))}),(0,M.jsxs)(l.Z,{variant:"contained",sx:{mx:1,my:2,borderRadius:2,height:40,width:212},onClick:()=>{c(!0)},children:[(0,M.jsx)(d.SC9,{}),"Add task"]})]}),(0,M.jsx)(se,{open:o,onClose:()=>{c(!1)},bId:n,status:t.id,dialogForm:0})]})};const he=new c.Z,xe=(0,L.ZP)(C.h),me=[{id:0,title:"Backlog",bgColor:"rgb(4, 124, 188)"},{id:1,title:"To-Do",bgColor:"rgb(236, 92, 68)"},{id:2,title:"Doing",bgColor:"rgb(236, 92, 68)"},{id:3,title:"Done",bgColor:"rgb(100, 188, 76)"}];var ue=()=>{const{boardId:e}=(0,n.UO)(),[t,a]=(0,s.useState)({}),[c,x]=(0,s.useState)({}),[m,u]=(0,s.useState)([]),[g,b]=(0,s.useState)([]),[p,j]=(0,s.useState)(!1),Z=e=>{he.getByID(e).then((e=>{a(e.data[0]),x(e.data[0].bgImg),u(e.data[0].tasks),b(e.data[0].member)}))};return(0,s.useEffect)((()=>{Z(e),xe.on("board",(()=>{Z(e)})),xe.on("task",(()=>{Z(e)}))}),[e]),(0,M.jsxs)(M.Fragment,{children:[(0,M.jsxs)(r.ZP,{container:!0,justifyContent:"space-between",alignItems:"center",sx:{mb:2,px:2},children:[(0,M.jsx)(i.Z,{variant:"h2",sx:{fontWeight:500},children:t.name}),(0,M.jsxs)(r.ZP,{item:!0,display:"flex",children:[g.map((e=>(0,M.jsx)(o.Z,{src:e.avatar.data,sx:{width:30,height:30}},e._id))),(0,M.jsxs)(l.Z,{variant:"contained",size:"small",sx:{ml:2},onClick:()=>{j(!0)},children:[(0,M.jsx)(d.TRY,{}),"Edit"]})]})]}),(0,M.jsx)(r.ZP,{container:!0,justifyContent:"space-evenly",sx:{py:2,backgroundImage:"url('".concat(c.data,"')"),backgroundSize:"cover",backgroundRepeat:"no-repeat",backgroundClip:"border-box"},children:me.map((t=>(0,M.jsx)(ce,{list:t,item:m,bId:e},t.id)))}),(0,M.jsx)(h.Z,{open:p,onClose:()=>{j(!1)},formData:t,wsId:t.workSpaceID,dialogForm:1})]})}}}]);
//# sourceMappingURL=984.0cb53a8c.chunk.js.map